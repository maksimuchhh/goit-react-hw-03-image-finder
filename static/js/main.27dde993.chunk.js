(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2qoWa",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3K8Z3"}},11:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ"}},15:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},27:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),r=a.n(o),s=a(13),c=a.n(s),l=a(2),i=a(3),u=a(5),h=a(4),m=a(9),d=a.n(m);function p(e){var t=e.src,a=e.closeModal;return Object(n.jsx)("div",{onClick:a,className:d.a.Overlay,children:Object(n.jsx)("div",{className:d.a.Modal,children:Object(n.jsx)("img",{src:t,alt:""})})})}var j=a(6),b=a.n(j),g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={query:""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.onSubmit;return Object(n.jsx)("header",{className:b.a.Searchbar,children:Object(n.jsxs)("form",{className:b.a.SearchForm,onSubmit:function(a){a.preventDefault(),t(e.state.query),e.setState({query:""})},children:[Object(n.jsx)("button",{type:"submit",className:b.a.SearchFormButton,children:Object(n.jsx)("span",{className:b.a.SearchFormButtonLabel,children:"Search"})}),Object(n.jsx)("input",{value:this.state.query,className:b.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(t){e.setState({query:t.currentTarget.value})}})]})})}}]),a}(o.Component),O=a(12),f=a(14),y=a(10),v=a.n(y);function x(e){var t=e.element,a=e.openModal;return Object(n.jsx)("li",{onClick:function(){console.log("Clicking!"),a(t)},className:v.a.ImageGalleryItem,children:Object(n.jsx)("img",{src:t.webformatURL,alt:"",className:v.a.ImageGalleryItemImage})})}var S=a(16),_=a.n(S),I=a(8),k=a(15),F=a.n(k);function q(e){var t=e.handleClick;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{onClick:t,className:F.a.Button,type:"button",children:"Load more..."})})}var M=a(11),w=a.n(M);function C(){var e=Object(f.a)(["\n  display: block;\n  margin: 35px auto;\n  border-color: red;\n"]);return C=function(){return e},e}var G=Object(I.css)(C()),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={photos:[],page:1,status:"idle",lastPage:!1,modalOpen:!1,modalPhoto:""},e.onClick=function(){e.setState({page:e.state.page+1})},e.openModal=function(t){e.setState({modalOpen:!0,modalPhoto:t.largeImageURL}),console.log(e.state)},e.closeModal=function(t){t.target===t.currentTarget&&e.setState({modalOpen:!1})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;e.query===this.props.query&&t.page===this.state.page||(e.query!==this.props.query&&this.setState({page:1,lastPage:!1}),this.setState({status:"pending"}),fetch("https://pixabay.com/api/?q=".concat(this.props.query,"&page=").concat(this.state.page,"&key=19216431-b460da2edf9faaa62085afedc&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()})).then((function(e){console.log(e),1!==a.state.page?(a.setState({photos:[].concat(Object(O.a)(t.photos),Object(O.a)(e.hits)),status:"resolved"}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})):a.setState({photos:e.hits,status:"resolved"}),e.totalHits===a.state.photos.length&&a.setState({lastPage:!0})})))}},{key:"render",value:function(){var e=this;window.addEventListener("keydown",(function(t){"Escape"===t.code&&e.setState({modalOpen:!1})}));var t=this.state.status;return"idle"===t?Object(n.jsx)("div",{children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430"}):"pending"===t?Object(n.jsxs)(n.Fragment,{children:[this.state.photos.length>0&&Object(n.jsx)("ul",{className:w.a.ImageGallery,children:this.state.photos.map((function(e){return Object(n.jsx)(x,{element:e},e.id)}))}),Object(n.jsx)(_.a,{css:G,size:150,color:"#123abc",loading:!0})]}):"resolved"===t?0===this.state.photos.length?Object(n.jsx)("div",{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:w.a.ImageGallery,children:this.state.photos.map((function(t){return Object(n.jsx)(x,{openModal:e.openModal,element:t},t.id)}))}),!this.state.lastPage&&Object(n.jsx)(q,{handleClick:this.onClick}),this.state.modalOpen&&Object(n.jsx)(p,{closeModal:this.closeModal,src:this.state.modalPhoto})]}):void 0}}]),a}(o.Component),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={query:"",status:"idle"},e.onSubmit=function(t){e.setState({query:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g,{onSubmit:this.onSubmit}),Object(n.jsx)(B,{query:this.state.query})]})}}]),a}(o.Component);c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={SearchForm:"Searchbar_SearchForm__1ac2l",SearchFormButton:"Searchbar_SearchFormButton__21S85",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__8f9cn",SearchFormInput:"Searchbar_SearchFormInput__VhsfU"}},9:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}}},[[27,1,2]]]);
//# sourceMappingURL=main.27dde993.chunk.js.map